{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/7400/Desktop/my-project/lost-found-app/src/app/items/%5Bid%5D/page.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\n\r\nexport default function ItemDetailPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const [item, setItem] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchItem = async () => {\r\n      try {\r\n        setLoading(true);\r\n        console.log('Fetching item with ID:', params.id);\r\n\r\n        const response = await fetch(`/api/items/${params.id}`);\r\n        console.log('Response status:', response.status);\r\n\r\n        if (!response.ok) {\r\n          // Safely parse JSON error\r\n          let errorData = { message: 'Unknown error' };\r\n          try {\r\n            errorData = await response.json();\r\n          } catch (e) {\r\n            console.error('Failed to parse error response:', e);\r\n          }\r\n          console.error('API Error:', errorData);\r\n\r\n          if (response.status === 404) {\r\n            setError('Item not found');\r\n          } else {\r\n            setError(errorData.message || 'Failed to load item');\r\n          }\r\n          return;\r\n        }\r\n\r\n        const data = await response.json();\r\n\r\n        // Ensure arrays exist to prevent rendering errors\r\n        const normalizedItem = {\r\n          ...data,\r\n          imageUrls: Array.isArray(data.imageUrls) ? data.imageUrls : [],\r\n          tags: Array.isArray(data.tags) ? data.tags : [],\r\n        };\r\n\r\n        console.log('Item data received:', normalizedItem);\r\n        setItem(normalizedItem);\r\n      } catch (err) {\r\n        console.error('Error fetching item:', err);\r\n        setError('An error occurred while loading the item');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (params.id) {\r\n      fetchItem();\r\n    }\r\n  }, [params.id]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-white flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Loading item details...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-white\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-6 text-center\">\r\n            <h1 className=\"text-2xl font-bold text-red-600 mb-2\">Error</h1>\r\n            <p className=\"text-red-700 mb-6\">{error}</p>\r\n            <Link\r\n              href=\"/items\"\r\n              className=\"inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition\"\r\n            >\r\n              ‚Üê Back to Items\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!item) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-white\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <Link\r\n            href=\"/items\"\r\n            className=\"inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition\"\r\n          >\r\n            ‚Üê Back to Items\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const statusColor = item.status === 'lost' ? 'red' : 'green';\r\n  const statusBg = item.status === 'lost' ? 'bg-red-100' : 'bg-green-100';\r\n  const statusText = item.status === 'lost' ? 'text-red-800' : 'text-green-800';\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-white\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Back Button */}\r\n        <Link\r\n          href=\"/items\"\r\n          className=\"inline-block mb-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition\"\r\n        >\r\n          ‚Üê Back to Items\r\n        </Link>\r\n\r\n        <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 p-8\">\r\n            {/* Item Images */}\r\n            <div className=\"flex flex-col gap-4\">\r\n              {item.imageUrls.length > 0 ? (\r\n                <>\r\n                  <div className=\"bg-gray-100 rounded-lg overflow-hidden h-96 relative\">\r\n                    <Image\r\n                      src={item.imageUrls[0]}\r\n                      alt={item.title}\r\n                      fill\r\n                      className=\"object-cover\"\r\n                    />\r\n                  </div>\r\n                  {item.imageUrls.length > 1 && (\r\n                    <div className=\"grid grid-cols-3 gap-2\">\r\n                      {item.imageUrls.map((img, idx) => (\r\n                        <div\r\n                          key={idx}\r\n                          className=\"bg-gray-100 rounded-lg overflow-hidden h-24 relative\"\r\n                        >\r\n                          <Image\r\n                            src={img}\r\n                            alt={`${item.title} image ${idx + 1}`}\r\n                            fill\r\n                            className=\"object-cover\"\r\n                          />\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <div className=\"bg-gray-200 rounded-lg h-96 flex items-center justify-center text-gray-500\">\r\n                  No image available\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Item Details */}\r\n            <div className=\"flex flex-col gap-6\">\r\n              {/* Title and Status */}\r\n              <div>\r\n                <h1 className=\"text-4xl font-bold text-gray-900 mb-3\">\r\n                  {item.title}\r\n                </h1>\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <span className={`px-4 py-2 rounded-full font-semibold ${statusBg} ${statusText}`}>\r\n                    {item.status === 'lost' ? 'üîç Lost' : '‚úì Found'}\r\n                  </span>\r\n                  <span className=\"px-4 py-2 rounded-full bg-blue-100 text-blue-800 font-semibold\">\r\n                    {item.category}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Description */}\r\n              <div>\r\n                <h2 className=\"text-xl font-bold text-gray-900 mb-2\">Description</h2>\r\n                <p className=\"text-gray-700 leading-relaxed whitespace-pre-wrap\">\r\n                  {item.description}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Location and Date */}\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <h3 className=\"text-sm font-semibold text-gray-600 mb-1\">Location</h3>\r\n                  <p className=\"text-lg text-gray-900\">\r\n                    {item.status === 'lost' ? item.locationLost : item.locationFound}\r\n                  </p>\r\n                  {item.locationDetails && (\r\n                    <p className=\"text-sm text-gray-600\">{item.locationDetails}</p>\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-sm font-semibold text-gray-600 mb-1\">\r\n                    {item.status === 'lost' ? 'Date Lost' : 'Date Found'}\r\n                  </h3>\r\n                  <p className=\"text-lg text-gray-900\">\r\n                    {item.status === 'lost' && item.dateLost\r\n                      ? new Date(item.dateLost).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })\r\n                      : item.dateFound\r\n                      ? new Date(item.dateFound).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })\r\n                      : 'Unknown'}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Additional Info */}\r\n              {(item.rewardAmount || item.tags.length > 0 || item.color || item.brand || item.distinguishingFeatures) && (\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  {item.rewardAmount && (\r\n                    <div className=\"mb-4\">\r\n                      <h3 className=\"text-sm font-semibold text-gray-600 mb-1\">Reward</h3>\r\n                      <p className=\"text-xl font-bold text-green-600\">${parseFloat(item.rewardAmount)}</p>\r\n                    </div>\r\n                  )}\r\n                  {(item.color || item.brand) && (\r\n                    <div className=\"mb-4\">\r\n                      {item.color && <p className=\"text-sm text-gray-700\"><strong>Color:</strong> {item.color}</p>}\r\n                      {item.brand && <p className=\"text-sm text-gray-700\"><strong>Brand:</strong> {item.brand}</p>}\r\n                    </div>\r\n                  )}\r\n                  {item.distinguishingFeatures && (\r\n                    <div className=\"mb-4\">\r\n                      <p className=\"text-sm text-gray-700\"><strong>Details:</strong> {item.distinguishingFeatures}</p>\r\n                    </div>\r\n                  )}\r\n                  {item.tags.length > 0 && (\r\n                    <div>\r\n                      <h3 className=\"text-sm font-semibold text-gray-600 mb-2\">Tags</h3>\r\n                      <div className=\"flex flex-wrap gap-2\">\r\n                        {item.tags.map((tag, idx) => (\r\n                          <span key={idx} className=\"px-3 py-1 bg-blue-200 text-blue-800 text-sm rounded-full\">\r\n                            {tag}\r\n                          </span>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Posted By */}\r\n              {item.user && (\r\n                <div className=\"bg-blue-50 rounded-lg p-4\">\r\n                  <h3 className=\"text-sm font-semibold text-gray-600 mb-3\">Posted By</h3>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    {item.user.profileImage && (\r\n                      <div className=\"relative w-12 h-12 rounded-full overflow-hidden flex-shrink-0\">\r\n                        <Image src={item.user.profileImage} alt={item.user.name} fill className=\"object-cover\" />\r\n                      </div>\r\n                    )}\r\n                    <div>\r\n                      <p className=\"font-semibold text-gray-900\">{item.user.name}</p>\r\n                      <p className=\"text-sm text-gray-600\">{item.user.email}</p>\r\n                      {item.user.reputation !== undefined && (\r\n                        <p className=\"text-sm text-yellow-600 font-semibold\">\r\n                          ‚òÖ {item.user.reputation || 0} reputation\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Contact Button */}\r\n              {item.user?.email && (\r\n                <a\r\n                  href={`mailto:${item.user.email}?subject=Inquiry about \"${item.title}\"`}\r\n                  className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition text-center\"\r\n                >\r\n                  Contact Poster\r\n                </a>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n  "],"names":[],"mappings":"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","debugId":null}}]
}