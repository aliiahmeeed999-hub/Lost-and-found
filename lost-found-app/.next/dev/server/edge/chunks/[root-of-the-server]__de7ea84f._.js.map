{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Desktop/my-project/lost-found-app/src/middleware.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\n\r\nexport function middleware(request) {\r\n  const token = request.cookies.get('token')?.value;\r\n  const { pathname } = request.nextUrl;\r\n\r\n  // Public routes that don't require authentication\r\n  const publicRoutes = ['/login', '/signup', '/forgot-password', '/'];\r\n  \r\n  // Protected routes that require authentication\r\n  const protectedRoutes = ['/dashboard', '/profile', '/items'];\r\n  \r\n  // Check if the current path is public\r\n  const isPublicRoute = publicRoutes.some(route => pathname === route || (route !== '/' && pathname.startsWith(route)));\r\n  \r\n  // Check if the current path is protected\r\n  const isProtectedRoute = protectedRoutes.some(route => pathname.startsWith(route));\r\n\r\n  // ========================================\r\n  // HANDLE PROTECTED ROUTES\r\n  // ========================================\r\n  if (isProtectedRoute) {\r\n    // If trying to access protected route without token, redirect to login\r\n    if (!token) {\r\n      return NextResponse.redirect(new URL('/login', request.url));\r\n    }\r\n    \r\n    // Token exists - continue to protected route\r\n    // Token verification happens server-side (in server components/API routes)\r\n    return NextResponse.next();\r\n  }\r\n\r\n  // ========================================\r\n  // HANDLE PUBLIC ROUTES\r\n  // ========================================\r\n  if (isPublicRoute) {\r\n    // If trying to access auth pages while already logged in,\r\n    // we'll handle redirect in the page/layout components\r\n    return NextResponse.next();\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    '/((?!api|_next/static|_next/image|favicon.ico).*)',\r\n  ],\r\n};"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEO,SAAS,WAAW,OAAO;IAChC,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU;IAC5C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,kDAAkD;IAClD,MAAM,eAAe;QAAC;QAAU;QAAW;QAAoB;KAAI;IAEnE,+CAA+C;IAC/C,MAAM,kBAAkB;QAAC;QAAc;QAAY;KAAS;IAE5D,sCAAsC;IACtC,MAAM,gBAAgB,aAAa,IAAI,CAAC,CAAA,QAAS,aAAa,SAAU,UAAU,OAAO,SAAS,UAAU,CAAC;IAE7G,yCAAyC;IACzC,MAAM,mBAAmB,gBAAgB,IAAI,CAAC,CAAA,QAAS,SAAS,UAAU,CAAC;IAE3E,2CAA2C;IAC3C,0BAA0B;IAC1B,2CAA2C;IAC3C,IAAI,kBAAkB;QACpB,uEAAuE;QACvE,IAAI,CAAC,OAAO;YACV,OAAO,oPAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC5D;QAEA,6CAA6C;QAC7C,2EAA2E;QAC3E,OAAO,oPAAY,CAAC,IAAI;IAC1B;IAEA,2CAA2C;IAC3C,uBAAuB;IACvB,2CAA2C;IAC3C,IAAI,eAAe;QACjB,0DAA0D;QAC1D,sDAAsD;QACtD,OAAO,oPAAY,CAAC,IAAI;IAC1B;IAEA,OAAO,oPAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;KACD;AACH"}}]
}