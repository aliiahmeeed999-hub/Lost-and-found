module.exports=[29173,(e,t,r)=>{t.exports=e.x("@prisma/client",()=>require("@prisma/client"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},23663,e=>{"use strict";var t=e.i(29173);let r=e.g.prisma||new t.PrismaClient({log:["error"]});e.s(["prisma",0,r])},72562,e=>{"use strict";var t=e.i(23663);function r(e,t){let r=e.toLowerCase().trim(),o=t.toLowerCase().trim();if(r===o)return 1;if(0===r.length||0===o.length)return 0;let a=r.length>o.length?r:o,n=r.length>o.length?o:r;if(a.includes(n))return .85;let i=function(e,t){let r=[];for(let o=0;o<=e.length;o++){let a=o;for(let n=0;n<=t.length;n++)if(0===o)r[n]=n;else if(n>0){let i=r[n-1];e.charAt(o-1)!==t.charAt(n-1)&&(i=Math.min(Math.min(i,a),r[n])+1),r[n-1]=a,a=i}o>0&&(r[t.length]=a)}return r[e.length]}(n,a);return Math.max(0,(a.length-i)/a.length)}function o(e){let t=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","from","is","was","are","been","be","have","has","had","do","does","did","will","would","could","should","may","might","can","my","your","our","their"]);return new Set((e.toLowerCase().match(/\b\w+\b/g)||[]).filter(e=>e.length>2&&!t.has(e)))}function a(e,t){let a=+(e.category.toLowerCase()===t.category.toLowerCase()),n=r(e.title,t.title),i=r(e.description,t.description),s=function(e,t){if(!e||!t)return 0;let o=r(e,t),a=e.toLowerCase().split(/[,\s]+/),n=t.toLowerCase().split(/[,\s]+/),i=0;for(let e of a)e.length>2&&n.includes(e)&&(i+=1);return i>0?Math.min(1,o+.2):o}(e.locationLost||e.locationFound,t.locationFound||t.locationLost),l=function(e,t){let r=o(e),a=o(t);if(0===r.size||0===a.size)return 0;let n=0;r.forEach(e=>{a.has(e)&&n++});let i=new Set([...r,...a]).size;return n/i}(`${e.title} ${e.description}`,`${t.title} ${t.description}`);return{score:Math.round(100*(.35*a+(n+i)/2*.4+.2*s+.05*l))/100,breakdown:{categoryScore:a,titleScore:n,locationScore:s,descriptionScore:l}}}async function n(e){try{let r=await t.prisma.item.findUnique({where:{id:e}});if(!r||"lost"!==r.status)return[];let o=await t.prisma.item.findMany({where:{status:"found",itemStatus:"active"}}),n=[];for(let i of o){let o=a({title:r.title,category:r.category,description:r.description,locationLost:r.locationLost,locationFound:r.locationFound},{title:i.title,category:i.category,description:i.description,locationLost:i.locationLost,locationFound:i.locationFound});if(console.log(`[MATCHING DEBUG] Lost Item "${r.title}" vs Found Item "${i.title}"`),console.log(`  Score: ${o.score} (need 0.7)`),console.log(`  Category: ${o.breakdown.categoryScore} (${r.category} vs ${i.category})`),console.log(`  Title Similarity: ${o.breakdown.titleScore}`),console.log(`  Location: ${o.breakdown.locationScore}`),console.log(`  Description/Keywords: ${o.breakdown.descriptionScore}`),o.score>=.7)try{let a=await t.prisma.match.upsert({where:{lostItemId_foundItemId:{lostItemId:e,foundItemId:i.id}},update:{matchScore:o.score},create:{lostItemId:e,foundItemId:i.id,matchScore:o.score,status:"pending"}});n.push(a),await Promise.all([t.prisma.notification.create({data:{userId:r.userId,type:"match",title:"Potential Match Found!",message:`A potential match for your lost item "${r.title}" was found!`,link:`/matches/${a.id}`}}),t.prisma.notification.create({data:{userId:i.userId,type:"match",title:"Your Found Item May Help!",message:`Your found item "${i.title}" may match a lost item someone is looking for!`,link:`/matches/${a.id}`}})])}catch(e){console.error("Error creating match:",e)}}return n}catch(e){throw console.error("Error checking matches for lost item:",e),e}}async function i(e){try{let r=await t.prisma.item.findUnique({where:{id:e}});if(!r||"found"!==r.status)return[];let o=await t.prisma.item.findMany({where:{status:"lost",itemStatus:"active"}}),n=[];for(let i of o){let o=a({title:i.title,category:i.category,description:i.description,locationLost:i.locationLost,locationFound:i.locationFound},{title:r.title,category:r.category,description:r.description,locationLost:r.locationLost,locationFound:r.locationFound});if(console.log(`[MATCHING DEBUG] Lost Item "${i.title}" vs Found Item "${r.title}"`),console.log(`  Score: ${o.score} (need 0.7)`),console.log(`  Category: ${o.breakdown.categoryScore} (${i.category} vs ${r.category})`),console.log(`  Title Similarity: ${o.breakdown.titleScore}`),console.log(`  Location: ${o.breakdown.locationScore}`),console.log(`  Description/Keywords: ${o.breakdown.descriptionScore}`),o.score>=.7)try{let a=await t.prisma.match.upsert({where:{lostItemId_foundItemId:{lostItemId:i.id,foundItemId:e}},update:{matchScore:o.score},create:{lostItemId:i.id,foundItemId:e,matchScore:o.score,status:"pending"}});n.push(a),await Promise.all([t.prisma.notification.create({data:{userId:i.userId,type:"match",title:"Potential Match Found!",message:`A potential match for your lost item "${i.title}" was found!`,link:`/matches/${a.id}`}}),t.prisma.notification.create({data:{userId:r.userId,type:"match",title:"Your Found Item May Help!",message:`Your found item "${r.title}" may match a lost item someone is looking for!`,link:`/matches/${a.id}`}})])}catch(e){console.error("Error creating match:",e)}}return n}catch(e){throw console.error("Error checking matches for found item:",e),e}}e.s(["checkMatchesForFoundItem",()=>i,"checkMatchesForLostItem",()=>n])},55258,e=>{"use strict";var t=e.i(88265),r=e.i(9610),o=e.i(72998),a=e.i(1761),n=e.i(7097),i=e.i(39581),s=e.i(34651),l=e.i(23905),c=e.i(19099),u=e.i(23861),d=e.i(28284),p=e.i(46196),m=e.i(76665),h=e.i(93618),f=e.i(27446),g=e.i(14946),w=e.i(93695);e.i(56653);var y=e.i(64115),x=e.i(63644),R=e.i(23663),v=e.i(58045),I=e.i(72562);async function E(e){try{let{searchParams:t}=new URL(e.url),r=t.get("status"),o=t.get("category"),a=parseInt(t.get("page"))||1,n=parseInt(t.get("limit"))||10,i=(a-1)*n,s={};r&&["lost","found"].includes(r)&&(s.status=r),o&&(s.category=o);let l=await R.prisma.item.count({where:s}),c=await R.prisma.item.findMany({where:s,skip:i,take:n,orderBy:{createdAt:"desc"},include:{user:{select:{id:!0,name:!0,email:!0,profileImage:!0}}}});return x.NextResponse.json({success:!0,items:c,pagination:{page:a,limit:n,total:l,pages:Math.ceil(l/n)}})}catch(e){return console.error("Fetch items error:",e),x.NextResponse.json({error:"Failed to fetch items"},{status:500})}}async function C(e){try{let t=await (0,v.getUserFromCookies)();if(!t)return x.NextResponse.json({error:"Authentication required"},{status:401});let{title:r,description:o,category:a,status:n,itemStatus:i,locationLost:s,locationFound:l,locationDetails:c,dateLost:u,dateFound:d,color:p,brand:m,distinguishingFeatures:h,contactInfo:f,rewardAmount:g,tags:w,imageUrls:y}=await e.json();if(!r||!r.trim())return x.NextResponse.json({error:"Title is required"},{status:400});if(!o||!o.trim())return x.NextResponse.json({error:"Description is required"},{status:400});if(!a)return x.NextResponse.json({error:"Category is required"},{status:400});if(!n||!["lost","found"].includes(n))return x.NextResponse.json({error:"Invalid status"},{status:400});if("lost"===n&&!s)return x.NextResponse.json({error:"Location where item was lost is required"},{status:400});if("found"===n&&!l)return x.NextResponse.json({error:"Location where item was found is required"},{status:400});let E=await R.prisma.item.create({data:{userId:t.userId,title:r.trim(),description:o.trim(),category:a,status:n,itemStatus:i||"active",locationLost:s?.trim()||null,locationFound:l?.trim()||null,locationDetails:c?.trim()||null,dateLost:u?new Date(u):null,dateFound:d?new Date(d):null,color:p?.trim()||null,brand:m?.trim()||null,distinguishingFeatures:h?.trim()||null,contactInfo:f?.trim()||null,rewardAmount:g?parseFloat(g):null,tags:w||[],imageUrls:y||[]},include:{user:{select:{id:!0,name:!0,email:!0,profileImage:!0}}}});try{"lost"===n?await (0,I.checkMatchesForLostItem)(E.id):"found"===n&&await (0,I.checkMatchesForFoundItem)(E.id)}catch(e){console.error("Error checking matches:",e)}return x.NextResponse.json({success:!0,message:"Item reported successfully",item:E},{status:201})}catch(e){return console.error("Create item error:",e),console.error("Error details:",{message:e.message,code:e.code,stack:e.stack}),x.NextResponse.json({error:"Failed to create item",details:e.message},{status:500})}}e.s(["GET",()=>E,"POST",()=>C],94608);var k=e.i(94608);let b=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/items/route",pathname:"/api/items",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/Desktop/my-project/lost-found-app/src/app/api/items/route.js",nextConfigOutput:"",userland:k}),{workAsyncStorage:S,workUnitAsyncStorage:$,serverHooks:A}=b;function F(){return(0,o.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:$})}async function N(e,t,o){b.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let x="/api/items/route";x=x.replace(/\/index$/,"")||"/";let R=await b.prepare(e,t,{srcPage:x,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:v,params:I,nextConfig:E,parsedUrl:C,isDraftMode:k,prerenderManifest:S,routerServerContext:$,isOnDemandRevalidate:A,revalidateOnlyGenerated:F,resolvedPathname:N,clientReferenceManifest:M,serverActionsManifest:q}=R,L=(0,l.normalizeAppPath)(x),j=!!(S.dynamicRoutes[L]||S.routes[N]),T=async()=>((null==$?void 0:$.render404)?await $.render404(e,t,C,!1):t.end("This page could not be found"),null);if(j&&!k){let e=!!S.routes[N],t=S.dynamicRoutes[L];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await T();throw new w.NoFallbackError}}let P=null;!j||b.isDev||k||(P="/index"===(P=N)?"/":P);let U=!0===b.isDev||!j,D=j&&!U;q&&M&&(0,i.setReferenceManifestsSingleton)({page:x,clientReferenceManifest:M,serverActionsManifest:q,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:q})});let O=e.method||"GET",_=(0,n.getTracer)(),H=_.getActiveScopeSpan(),K={params:I,prerenderManifest:S,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:U,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,o)=>b.onRequestError(e,t,o,$)},sharedContext:{buildId:v}},B=new c.NodeNextRequest(e),G=new c.NodeNextResponse(t),z=u.NextRequestAdapter.fromNodeNextRequest(B,(0,u.signalFromNodeResponse)(t));try{let i=async e=>b.handle(z,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=_.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${O} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${O} ${x}`)}),s=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var n,l;let c=async({previousCacheEntry:r})=>{try{if(!s&&A&&F&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await i(a);e.fetchMetrics=K.renderOpts.fetchMetrics;let l=K.renderOpts.pendingWaitUntil;l&&o.waitUntil&&(o.waitUntil(l),l=void 0);let c=K.renderOpts.collectedTags;if(!j)return await (0,m.sendResponse)(B,G,n,K.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(n.headers);c&&(t[g.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,o=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==r?void 0:r.isStale)&&await b.onRequestError(e,t,{routerKind:"App Router",routePath:x,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:A})},$),t}},u=await b.handleResponse({req:e,nextConfig:E,cacheKey:P,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:S,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:F,responseGenerator:c,waitUntil:o.waitUntil,isMinimalMode:s});if(!j)return null;if((null==u||null==(n=u.value)?void 0:n.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",A?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),k&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return s&&j||d.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,f.getCacheControlHeader)(u.cacheControl)),await (0,m.sendResponse)(B,G,new Response(u.value.body,{headers:d,status:u.value.status||200})),null};H?await l(H):await _.withPropagatedContext(e.headers,()=>_.trace(d.BaseServerSpan.handleRequest,{spanName:`${O} ${x}`,kind:n.SpanKind.SERVER,attributes:{"http.method":O,"http.target":e.url}},l))}catch(t){if(t instanceof w.NoFallbackError||await b.onRequestError(e,t,{routerKind:"App Router",routePath:L,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:A})}),j)throw t;return await (0,m.sendResponse)(B,G,new Response(null,{status:500})),null}}e.s(["handler",()=>N,"patchFetch",()=>F,"routeModule",()=>b,"serverHooks",()=>A,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>$],55258)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ee7261a9._.js.map