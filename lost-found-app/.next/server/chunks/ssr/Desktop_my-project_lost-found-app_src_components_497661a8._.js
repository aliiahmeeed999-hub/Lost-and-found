module.exports=[91499,a=>{"use strict";var b=a.i(55027),c=a.i(38913),d=a.i(14058),e=a.i(96256);let f=(0,e.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var g=a.i(8239);let h=(0,e.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function i(){let[a,e]=(0,c.useState)([]),[i,j]=(0,c.useState)(0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),o=(0,c.useRef)(null);(0,c.useEffect)(()=>{p();let a=setInterval(p,3e4);return()=>clearInterval(a)},[]),(0,c.useEffect)(()=>{let a=a=>{o.current&&!o.current.contains(a.target)&&l(!1)};if(k)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[k]);let p=async()=>{try{n(!0);let a=await fetch("/api/notifications/list?limit=20&offset=0");if(a.ok){let b=await a.json();e(b.notifications||[]),j(b.unreadCount||0)}}catch(a){console.error("Failed to fetch notifications:",a)}finally{n(!1)}},q=async b=>{try{await fetch("/api/notifications/mark-read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationId:b})}),e(a.map(a=>a.id===b?{...a,isRead:!0}:a)),j(Math.max(0,i-1))}catch(a){console.error("Failed to mark notification as read:",a)}},r=async(b,c)=>{c.stopPropagation();try{await fetch("/api/notifications/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationId:b})}),e(a.filter(a=>a.id!==b))}catch(a){console.error("Failed to delete notification:",a)}};return(0,b.jsxs)("div",{className:"relative",ref:o,children:[(0,b.jsxs)("button",{onClick:()=>l(!k),className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Notifications",children:[(0,b.jsx)(f,{className:"w-6 h-6 text-gray-700"}),i>0&&(0,b.jsx)("span",{className:"absolute top-1 right-1 inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-600 rounded-full",children:i>9?"9+":i})]}),k&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-3 rounded-t-lg flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Notifications"}),(0,b.jsx)("button",{onClick:()=>l(!1),className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,b.jsx)(g.X,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"max-h-96 overflow-y-auto",children:m?(0,b.jsx)("div",{className:"p-4 text-center text-gray-500",children:(0,b.jsx)("div",{className:"inline-block w-6 h-6 border-2 border-gray-300 border-t-indigo-600 rounded-full animate-spin"})}):0===a.length?(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)(f,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"No notifications yet"})]}):(0,b.jsx)("div",{className:"divide-y divide-gray-200",children:a.map(a=>{let c,d;return(0,b.jsx)("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${!a.isRead?"bg-blue-50":""}`,onClick:()=>{a.isRead||q(a.id),a.link&&(window.location.href=a.link)},children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${(a=>{switch(a){case"match":return"bg-blue-100 text-blue-600";case"found":return"bg-green-100 text-green-600";case"message":return"bg-purple-100 text-purple-600";case"badge":return"bg-yellow-100 text-yellow-600";case"reminder":return"bg-orange-100 text-orange-600";case"nearby":return"bg-pink-100 text-pink-600";default:return"bg-gray-100 text-gray-600"}})(a.type)}`,children:a.type.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800 text-sm",children:a.title}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mt-1 line-clamp-2",children:a.message}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(c=new Date(a.createdAt),(d=Math.floor((new Date().getTime()-c.getTime())/1e3))<60?"just now":d<3600?`${Math.floor(d/60)}m ago`:d<86400?`${Math.floor(d/3600)}h ago`:d<604800?`${Math.floor(d/86400)}d ago`:c.toLocaleDateString())})]}),(0,b.jsx)("button",{onClick:b=>r(a.id,b),className:"flex-shrink-0 p-1 hover:bg-red-100 rounded transition-colors text-gray-400 hover:text-red-600",children:(0,b.jsx)(h,{className:"w-4 h-4"})})]})},a.id)})})}),a.length>0&&(0,b.jsx)("div",{className:"bg-gray-50 px-4 py-3 rounded-b-lg border-t border-gray-200",children:(0,b.jsx)(d.default,{href:"/notifications",className:"text-sm text-indigo-600 hover:text-indigo-700 font-semibold flex items-center justify-center",children:"View All Notifications â†’"})})]})]})}a.s(["default",()=>i],91499)},88675,a=>{"use strict";var b=a.i(55027),c=a.i(38913);let d=(0,a.i(96256).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);var e=a.i(64621),f=a.i(33617),g=a.i(55163),h=a.i(52902),i=a.i(32637);function j({matchId:a,score:d,lostItem:e,foundItem:j,isLostItemOwner:k,status:l,onConfirm:m}){let[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),r=Math.round(100*d),s=k?j:e,t=s.user,u=async()=>{try{o(!0),q(null),await m(a)}catch(a){q(a instanceof Error?a.message:"Failed to confirm match")}finally{o(!1)}},v=k?j.locationFound||j.locationLost||"Unknown location":e.locationLost||e.locationFound||"Unknown location";return(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow border border-gray-200 overflow-hidden",children:(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 p-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"relative w-full h-64 bg-gray-100 rounded-lg overflow-hidden mb-4",children:s.imageUrls&&s.imageUrls.length>0?(0,b.jsx)(f.default,{src:s.imageUrls[0],alt:s.title,fill:!0,className:"object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-200 to-gray-300",children:(0,b.jsx)("span",{className:"text-gray-500 text-sm",children:"No image"})})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:s.title}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:s.description}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,b.jsx)(h.MapPin,{className:"w-4 h-4 text-indigo-600"}),(0,b.jsx)("span",{className:"text-sm",children:v})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,b.jsx)(i.Calendar,{className:"w-4 h-4 text-indigo-600"}),(0,b.jsx)("span",{className:"text-sm",children:k&&j.dateFound?new Date(j.dateFound).toLocaleDateString():e.dateLost?new Date(e.dateLost).toLocaleDateString():"Unknown date"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Match Score"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Similarity"}),(0,b.jsxs)("span",{className:"text-lg font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:[r,"%"]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-indigo-600 to-purple-600 transition-all duration-500",style:{width:`${r}%`}})})]}),r>=85&&(0,b.jsx)("p",{className:"text-sm text-green-600 font-medium mb-4",children:"ðŸŽ¯ High confidence match!"}),r>=70&&r<85&&(0,b.jsx)("p",{className:"text-sm text-amber-600 font-medium mb-4",children:"Good match potential"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-4 mb-4",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"Contact Person"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[t.profileImage&&(0,b.jsx)("img",{src:t.profileImage,alt:t.name,className:"w-10 h-10 rounded-full object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:t.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:t.email})]})]})]}),(0,b.jsxs)("div",{children:["confirmed"===l?(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-green-50 text-green-700 px-4 py-3 rounded-lg border border-green-200",children:[(0,b.jsx)(g.CheckCircle,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Match Confirmed"})]}):(0,b.jsx)("button",{onClick:u,disabled:n,className:"w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Confirming...":"Confirm Match"}),p&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-2",children:p})]})]})]})})}function k({userId:a,title:f="Your Matches",showOnlyPending:g=!1}){let[h,i]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null);(0,c.useEffect)(()=>{o()},[]);let o=async()=>{try{l(!0),n(null);let a=await fetch("/api/match/list");if(!a.ok)throw Error("Failed to fetch matches");let b=(await a.json()).matches||[];g&&(b=b.filter(a=>"pending"===a.status)),i(b)}catch(a){n(a instanceof Error?a.message:"Failed to load matches")}finally{l(!1)}},p=async a=>{try{if(!(await fetch("/api/match/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchId:a})})).ok)throw Error("Failed to confirm match");await o()}catch(a){throw a}};return k?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"inline-block",children:(0,b.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-gray-200 border-t-indigo-600 animate-spin"})}),(0,b.jsx)("p",{className:"text-gray-600 mt-4",children:"Loading matches..."})]}):m?(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-gap-3",children:[(0,b.jsx)(e.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-red-900",children:"Error"}),(0,b.jsx)("p",{className:"text-sm text-red-700",children:m})]})]}):0===h.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"text-gray-400 mb-3 flex justify-center",children:(0,b.jsx)(d,{className:"w-16 h-16"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No matches yet"}),(0,b.jsx)("p",{className:"text-gray-600",children:g?"No pending matches. Check back soon!":"Post an item to start finding matches"})]}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[(0,b.jsx)(d,{className:"w-6 h-6 text-red-600"}),f]}),(0,b.jsx)("div",{className:"space-y-6",children:h.map(c=>{let d=c.lostItem.userId===a;return(0,b.jsx)(j,{matchId:c.id,score:c.matchScore,lostItem:c.lostItem,foundItem:c.foundItem,isLostItemOwner:d,status:c.status,onConfirm:p},c.id)})})]})}a.s(["default",()=>k],88675)}];

//# sourceMappingURL=Desktop_my-project_lost-found-app_src_components_497661a8._.js.map