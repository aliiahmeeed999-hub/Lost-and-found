{"version":3,"sources":["turbopack:///[project]/Desktop/my-project/lost-found-app/lib/prisma.js","turbopack:///[project]/Desktop/my-project/lost-found-app/src/components/DashboardEditProfileForm.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/Desktop/my-project/lost-found-app/src/app/dashboard/profile/edit/page.tsx"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\n// Prevent multiple instances of Prisma Client in development\r\nconst globalForPrisma = global;\r\n\r\nexport const prisma = globalForPrisma.prisma || new PrismaClient({\r\n  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\r\n});\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  globalForPrisma.prisma = prisma;\r\n}","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/my-project/lost-found-app/src/components/DashboardEditProfileForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/my-project/lost-found-app/src/components/DashboardEditProfileForm.tsx\",\n    \"default\",\n);\n","import { redirect } from 'next/navigation';\r\nimport { cookies } from 'next/headers';\r\nimport { verifyToken } from '@/lib/auth';\r\nimport { prisma } from '@/lib/prisma';\r\nimport DashboardEditProfileForm from '@/components/DashboardEditProfileForm';\r\n\r\n/**\r\n * GET /dashboard/profile/edit\r\n * Authenticated user's profile edit page\r\n * Protected: Only accessible to authenticated users\r\n */\r\nexport default async function DashboardEditProfilePage() {\r\n  try {\r\n    // Get token from cookies\r\n    const cookieStore = await cookies();\r\n    const token = cookieStore.get('token')?.value;\r\n\r\n    // Redirect to login if not authenticated\r\n    if (!token) {\r\n      redirect('/login');\r\n    }\r\n\r\n    // Verify token\r\n    const decoded = verifyToken(token) as { userId: number; email: string } | null;\r\n\r\n    if (!decoded) {\r\n      redirect('/login');\r\n    }\r\n\r\n    // Fetch user from database\r\n    const user = await prisma.user.findUnique({\r\n      where: { id: decoded.userId },\r\n      select: {\r\n        id: true,\r\n        name: true,\r\n        email: true,\r\n        phone: true,\r\n        studentId: true,\r\n        profileImage: true,\r\n        bio: true,\r\n        isVerified: true,\r\n        reputation: true,\r\n        createdAt: true,\r\n        updatedAt: true,\r\n      },\r\n    });\r\n\r\n    // Redirect if user not found\r\n    if (!user) {\r\n      redirect('/login');\r\n    }\r\n\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        {/* Header */}\r\n        <div className=\"bg-white shadow-sm border-b\">\r\n          <div className=\"max-w-7xl mx-auto px-4 py-6\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900\">Edit Profile</h1>\r\n            <p className=\"text-gray-600 mt-1\">Update your profile information</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <main className=\"max-w-7xl mx-auto px-4 py-8\">\r\n          <DashboardEditProfileForm user={user} />\r\n        </main>\r\n      </div>\r\n    );\r\n  } catch (error) {\r\n    console.error('Dashboard edit profile page error:', error);\r\n\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        <div className=\"max-w-7xl mx-auto px-4 py-12\">\r\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-6 text-center\">\r\n            <h1 className=\"text-2xl font-bold text-red-900 mb-2\">Error Loading Profile</h1>\r\n            <p className=\"text-red-800 mb-4\">Failed to load your profile. Please try again.</p>\r\n            <a\r\n              href=\"/dashboard/profile\"\r\n              className=\"inline-block px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n            >\r\n              Back to Profile\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"oZAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAKO,IAAM,EAFP,AAEgB,EAFhB,CAAA,CAEgC,MAAM,EAAI,IAAI,EAAA,YAAY,CAAC,CAC/D,IAA2E,CAAtE,AAAuE,QAAQ,AACtF,8BADgD,iDCJjC,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,+UAAiV,EAC9W,8GACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,2TAA6T,EAC1V,0FACA,oICLJ,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAOe,eAAe,IAC5B,GAAI,CAEF,IAAM,EAAc,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,IAC3B,EAAQ,EAAY,GAAG,CAAC,UAAU,KAGpC,CAAC,GACH,CAAA,EAAA,CADU,CACV,QAAA,AAAQ,EAAC,UAIX,IAAM,EAAU,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,EAExB,CAAC,GACH,CAAA,EAAA,EAAA,CADY,OACZ,AAAQ,EAAC,UAIX,IAAM,EAAO,MAAM,EAAA,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CACxC,MAAO,CAAE,GAAI,EAAQ,MAAO,AAAD,EAC3B,OAAQ,CACN,IAAI,EACJ,MAAM,EACN,OAAO,EACP,OAAO,EACP,WAAW,EACX,cAAc,EACd,IAAK,GACL,WAAY,GACZ,YAAY,EACZ,WAAW,EACX,WAAW,CACb,CACF,GAOA,OAJI,AAAC,GACH,CAAA,EADS,AACT,EAAA,QAAA,AAAQ,EAAC,UAIT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4CAAmC,iBACjD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAqB,yCAKtC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uCACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAwB,CAAA,CAAC,KAAM,QAIxC,CAAE,MAAO,EAAO,CAGd,OAFA,QAAQ,KAAK,CAAC,qCAAsC,GAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gDAAuC,0BACrD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6BAAoB,mDACjC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACC,KAAK,qBACL,UAAU,sGACX,0BAOX,CACF","ignoreList":[1]}